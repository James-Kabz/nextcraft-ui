{"version":3,"sources":["../../src/components/craft-icon.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nimport { cn } from \"@/utils/cn\";\n\nexport type CraftIconRegistry = Record<string, React.ReactNode>;\n\nconst CraftIconContext = React.createContext<CraftIconRegistry | null>(null);\n\nexport type CraftIconProviderProps = {\n  icons: CraftIconRegistry;\n  children: React.ReactNode;\n};\n\nexport function CraftIconProvider({ icons, children }: CraftIconProviderProps) {\n  return <CraftIconContext.Provider value={icons}>{children}</CraftIconContext.Provider>;\n}\n\nexport type CraftIconProps = {\n  name: string;\n  className?: string;\n  \"aria-label\"?: string;\n  icons?: CraftIconRegistry;\n  useLucide?: boolean;\n};\n\ntype DynamicIconComponent = React.ComponentType<{\n  name: string;\n  className?: string;\n  \"aria-hidden\"?: boolean;\n  \"aria-label\"?: string;\n}>;\n\nexport function CraftIcon({\n  name,\n  className,\n  \"aria-label\": ariaLabel,\n  icons,\n  useLucide = true,\n}: CraftIconProps) {\n  const contextRegistry = React.useContext(CraftIconContext);\n  const registry = icons ?? contextRegistry;\n  const icon = registry?.[name];\n  const [LucideIcon, setLucideIcon] = React.useState<DynamicIconComponent | null>(\n    null\n  );\n\n  React.useEffect(() => {\n    if (!useLucide || icon || LucideIcon) return;\n    let mounted = true;\n    (async () => {\n      try {\n        const mod = await (Function)(\n          \"return import('lucide-react/dynamic')\"\n        )();\n        if (mounted) {\n          setLucideIcon(() => mod.DynamicIcon as DynamicIconComponent);\n        }\n      } catch {\n        if (mounted) setLucideIcon(null);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, [LucideIcon, icon, useLucide]);\n\n  if (!icon) {\n    if (!useLucide) return null;\n    if (!LucideIcon) return null;\n    return (\n      <LucideIcon\n        name={name}\n        className={className}\n        aria-hidden={ariaLabel ? undefined : true}\n        aria-label={ariaLabel}\n      />\n    );\n  }\n\n  type IconElementProps = {\n    className?: string;\n    \"aria-hidden\"?: boolean;\n    \"aria-label\"?: string;\n  };\n\n  if (React.isValidElement<IconElementProps>(icon)) {\n    return React.cloneElement(icon, {\n      className: cn(icon.props.className, className),\n      \"aria-hidden\": ariaLabel ? undefined : true,\n      \"aria-label\": ariaLabel,\n    });\n  }\n\n  return (\n    <span className={className} aria-label={ariaLabel}>\n      {icon}\n    </span>\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBS;AAdT,YAAuB;AAEvB,gBAAmB;AAInB,MAAM,mBAAmB,MAAM,cAAwC,IAAI;AAOpE,SAAS,kBAAkB,EAAE,OAAO,SAAS,GAA2B;AAC7E,SAAO,4CAAC,iBAAiB,UAAjB,EAA0B,OAAO,OAAQ,UAAS;AAC5D;AAiBO,SAAS,UAAU;AAAA,EACxB;AAAA,EACA;AAAA,EACA,cAAc;AAAA,EACd;AAAA,EACA,YAAY;AACd,GAAmB;AACjB,QAAM,kBAAkB,MAAM,WAAW,gBAAgB;AACzD,QAAM,WAAW,wBAAS;AAC1B,QAAM,OAAO,qCAAW;AACxB,QAAM,CAAC,YAAY,aAAa,IAAI,MAAM;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,aAAa,QAAQ,WAAY;AACtC,QAAI,UAAU;AACd,KAAC,YAAY;AACX,UAAI;AACF,cAAM,MAAM,MAAO;AAAA,UACjB;AAAA,QACF,EAAE;AACF,YAAI,SAAS;AACX,wBAAc,MAAM,IAAI,WAAmC;AAAA,QAC7D;AAAA,MACF,QAAQ;AACN,YAAI,QAAS,eAAc,IAAI;AAAA,MACjC;AAAA,IACF,GAAG;AACH,WAAO,MAAM;AACX,gBAAU;AAAA,IACZ;AAAA,EACF,GAAG,CAAC,YAAY,MAAM,SAAS,CAAC;AAEhC,MAAI,CAAC,MAAM;AACT,QAAI,CAAC,UAAW,QAAO;AACvB,QAAI,CAAC,WAAY,QAAO;AACxB,WACE;AAAA,MAAC;AAAA;AAAA,QACC;AAAA,QACA;AAAA,QACA,eAAa,YAAY,SAAY;AAAA,QACrC,cAAY;AAAA;AAAA,IACd;AAAA,EAEJ;AAQA,MAAI,MAAM,eAAiC,IAAI,GAAG;AAChD,WAAO,MAAM,aAAa,MAAM;AAAA,MAC9B,eAAW,cAAG,KAAK,MAAM,WAAW,SAAS;AAAA,MAC7C,eAAe,YAAY,SAAY;AAAA,MACvC,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAEA,SACE,4CAAC,UAAK,WAAsB,cAAY,WACrC,gBACH;AAEJ;","names":[]}