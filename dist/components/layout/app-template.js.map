{"version":3,"sources":["../../../src/components/layout/app-template.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nimport { AppShell } from \"./app-shell\";\nimport { CraftIcon } from \"@/components/craft-icon\";\nimport { Breadcrumbs } from \"./breadcrumbs\";\nimport { Sidebar, type SidebarItem } from \"./sidebar\";\nimport { TopNav } from \"./top-nav\";\nimport type { LayoutConfig, LayoutSidebarItem } from \"./layout-config\";\n\nexport type AppTemplateProps = {\n  config: LayoutConfig;\n  headerActions?: React.ReactNode;\n  headerBreadcrumb?: React.ReactNode;\n  sidebarFooter?: React.ReactNode;\n  resolveIcon?: (name: string) => React.ReactNode;\n  icons?: Record<string, React.ReactNode>;\n  activePath?: string;\n  getActivePath?: () => string | undefined;\n  children: React.ReactNode;\n};\n\nexport function AppTemplate({\n  config,\n  headerActions,\n  headerBreadcrumb,\n  sidebarFooter,\n  resolveIcon,\n  icons,\n  activePath,\n  getActivePath,\n  children,\n}: AppTemplateProps) {\n  const sidebarConfig = config.sidebar;\n  const headerConfig = config.header;\n\n  const resolvedActivePath = activePath ?? getActivePath?.();\n\n  const buildIcon = React.useCallback(\n    (name?: string) => {\n      if (!name) return undefined;\n      if (resolveIcon) return resolveIcon(name);\n      if (icons?.[name]) return icons[name];\n      return <CraftIcon name={name} size=\"lg\"/>;\n    },\n    [icons, resolveIcon]\n  );\n\n  const sidebarItems: SidebarItem[] | null = sidebarConfig\n    ? sidebarConfig.items.map((item: LayoutSidebarItem) => ({\n        label: item.label,\n        href: item.href,\n        active:\n          item.active ??\n          (resolvedActivePath && item.href\n            ? item.href === resolvedActivePath\n            : false),\n        icon: buildIcon(item.icon),\n      }))\n    : null;\n\n  const breadcrumbNode =\n    headerBreadcrumb ??\n    (headerConfig?.breadcrumb ? (\n      <Breadcrumbs items={headerConfig.breadcrumb} />\n    ) : null);\n\n  const sidebarFooterNode =\n    sidebarFooter ??\n    (sidebarConfig?.footerText ? (\n      <div className=\"text-xs text-[rgb(var(--nc-fg-muted))]\">\n        {sidebarConfig.footerText}\n      </div>\n    ) : null);\n\n  return (\n    <AppShell\n      sidebar={\n        sidebarConfig && sidebarItems ? (\n          <Sidebar\n            title={sidebarConfig.title}\n            items={sidebarItems}\n            footer={sidebarFooterNode}\n          />\n        ) : undefined\n      }\n      topNav={\n        headerConfig ? (\n          <TopNav\n            title={headerConfig.title}\n            breadcrumb={breadcrumbNode}\n            actions={headerActions}\n          />\n        ) : undefined\n      }\n    >\n      {children}\n    </AppShell>\n  );\n}\n"],"mappings":";AA4Ca;AA1Cb,YAAY,WAAW;AAEvB,SAAS,gBAAgB;AACzB,SAAS,iBAAiB;AAC1B,SAAS,mBAAmB;AAC5B,SAAS,eAAiC;AAC1C,SAAS,cAAc;AAehB,SAAS,YAAY;AAAA,EAC1B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAqB;AACnB,QAAM,gBAAgB,OAAO;AAC7B,QAAM,eAAe,OAAO;AAE5B,QAAM,qBAAqB,kCAAc;AAEzC,QAAM,YAAY,MAAM;AAAA,IACtB,CAAC,SAAkB;AACjB,UAAI,CAAC,KAAM,QAAO;AAClB,UAAI,YAAa,QAAO,YAAY,IAAI;AACxC,UAAI,+BAAQ,MAAO,QAAO,MAAM,IAAI;AACpC,aAAO,oBAAC,aAAU,MAAY,MAAK,MAAI;AAAA,IACzC;AAAA,IACA,CAAC,OAAO,WAAW;AAAA,EACrB;AAEA,QAAM,eAAqC,gBACvC,cAAc,MAAM,IAAI,CAAC,SAAyB;AAlDxD;AAkD4D;AAAA,MACpD,OAAO,KAAK;AAAA,MACZ,MAAM,KAAK;AAAA,MACX,SACE,UAAK,WAAL,YACC,sBAAsB,KAAK,OACxB,KAAK,SAAS,qBACd;AAAA,MACN,MAAM,UAAU,KAAK,IAAI;AAAA,IAC3B;AAAA,GAAE,IACF;AAEJ,QAAM,iBACJ,+CACC,6CAAc,cACb,oBAAC,eAAY,OAAO,aAAa,YAAY,IAC3C;AAEN,QAAM,oBACJ,yCACC,+CAAe,cACd,oBAAC,SAAI,WAAU,0CACZ,wBAAc,YACjB,IACE;AAEN,SACE;AAAA,IAAC;AAAA;AAAA,MACC,SACE,iBAAiB,eACf;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,cAAc;AAAA,UACrB,OAAO;AAAA,UACP,QAAQ;AAAA;AAAA,MACV,IACE;AAAA,MAEN,QACE,eACE;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,aAAa;AAAA,UACpB,YAAY;AAAA,UACZ,SAAS;AAAA;AAAA,MACX,IACE;AAAA,MAGL;AAAA;AAAA,EACH;AAEJ;","names":[]}