{"version":3,"sources":["../../src/components/craft-form.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { FormProvider, type FieldValues, type UseFormReturn } from \"react-hook-form\";\n\nimport { cn } from \"@/utils/cn\";\nimport type { ThemeName } from \"@/theme/theme-context\";\nimport { CraftModal } from \"@/components/craft-modal\";\nimport { CraftButton } from \"@/components/craft-button\";\n\nexport type CraftFormProps<TValues extends FieldValues> = {\n  form: UseFormReturn<TValues>;\n  onSubmit: (values: TValues) => void | Promise<void>;\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  trigger?: React.ReactNode;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  submitLabel?: React.ReactNode;\n  cancelLabel?: React.ReactNode;\n  tone?: ThemeName;\n  className?: string;\n  children?: React.ReactNode;\n  footer?: React.ReactNode;\n  disableSubmitWhenInvalid?: boolean;\n  closeOnSubmit?: boolean;\n  formClassName?: string;\n};\n\nexport function CraftForm<TValues extends FieldValues>({\n  form,\n  onSubmit,\n  open,\n  defaultOpen = false,\n  onOpenChange,\n  trigger,\n  title,\n  description,\n  submitLabel = \"Save\",\n  cancelLabel = \"Cancel\",\n  tone,\n  className,\n  children,\n  footer,\n  disableSubmitWhenInvalid = true,\n  closeOnSubmit = true,\n  formClassName,\n}: CraftFormProps<TValues>) {\n  const [uncontrolledOpen, setUncontrolledOpen] = React.useState(defaultOpen);\n  const isControlled = typeof open === \"boolean\";\n  const isOpen = isControlled ? open : uncontrolledOpen;\n\n  const setOpen = React.useCallback(\n    (next: boolean) => {\n      if (!isControlled) setUncontrolledOpen(next);\n      onOpenChange?.(next);\n    },\n    [isControlled, onOpenChange]\n  );\n\n  const formId = React.useId();\n  const isSubmitDisabled =\n    disableSubmitWhenInvalid && !form.formState.isValid;\n\n  const handleSubmit = form.handleSubmit(async (values) => {\n    await onSubmit(values);\n    if (closeOnSubmit) setOpen(false);\n  });\n\n  const footerContent = footer ?? (\n    <div className=\"flex flex-wrap items-center justify-end gap-3\">\n      <CraftButton type=\"button\" variant=\"ghost\" onClick={() => setOpen(false)}>\n        {cancelLabel}\n      </CraftButton>\n      <CraftButton\n        type=\"submit\"\n        variant=\"solid\"\n        form={formId}\n        disabled={isSubmitDisabled}\n      >\n        {submitLabel}\n      </CraftButton>\n    </div>\n  );\n\n  return (\n    <FormProvider {...form}>\n      <CraftModal\n        open={isOpen}\n        onOpenChange={setOpen}\n        trigger={trigger}\n        title={title}\n        description={description}\n        tone={tone}\n        className={className}\n        footer={footerContent}\n      >\n        <form\n          id={formId}\n          onSubmit={handleSubmit}\n          className={cn(\"space-y-5\", formClassName)}\n        >\n          {children}\n        </form>\n      </CraftModal>\n    </FormProvider>\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAuEI;AArEJ,YAAuB;AACvB,6BAAmE;AAEnE,gBAAmB;AAEnB,yBAA2B;AAC3B,0BAA4B;AAsBrB,SAAS,UAAuC;AAAA,EACrD;AAAA,EACA;AAAA,EACA;AAAA,EACA,cAAc;AAAA,EACd;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,cAAc;AAAA,EACd,cAAc;AAAA,EACd;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,2BAA2B;AAAA,EAC3B,gBAAgB;AAAA,EAChB;AACF,GAA4B;AAC1B,QAAM,CAAC,kBAAkB,mBAAmB,IAAI,MAAM,SAAS,WAAW;AAC1E,QAAM,eAAe,OAAO,SAAS;AACrC,QAAM,SAAS,eAAe,OAAO;AAErC,QAAM,UAAU,MAAM;AAAA,IACpB,CAAC,SAAkB;AACjB,UAAI,CAAC,aAAc,qBAAoB,IAAI;AAC3C,mDAAe;AAAA,IACjB;AAAA,IACA,CAAC,cAAc,YAAY;AAAA,EAC7B;AAEA,QAAM,SAAS,MAAM,MAAM;AAC3B,QAAM,mBACJ,4BAA4B,CAAC,KAAK,UAAU;AAE9C,QAAM,eAAe,KAAK,aAAa,OAAO,WAAW;AACvD,UAAM,SAAS,MAAM;AACrB,QAAI,cAAe,SAAQ,KAAK;AAAA,EAClC,CAAC;AAED,QAAM,gBAAgB,0BACpB,6CAAC,SAAI,WAAU,iDACb;AAAA,gDAAC,mCAAY,MAAK,UAAS,SAAQ,SAAQ,SAAS,MAAM,QAAQ,KAAK,GACpE,uBACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACC,MAAK;AAAA,QACL,SAAQ;AAAA,QACR,MAAM;AAAA,QACN,UAAU;AAAA,QAET;AAAA;AAAA,IACH;AAAA,KACF;AAGF,SACE,4CAAC,uCAAc,GAAG,MAChB;AAAA,IAAC;AAAA;AAAA,MACC,MAAM;AAAA,MACN,cAAc;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,MAER;AAAA,QAAC;AAAA;AAAA,UACC,IAAI;AAAA,UACJ,UAAU;AAAA,UACV,eAAW,cAAG,aAAa,aAAa;AAAA,UAEvC;AAAA;AAAA,MACH;AAAA;AAAA,EACF,GACF;AAEJ;","names":[]}