{"version":3,"sources":["../../src/components/craft-drawer.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport { cn } from \"@/utils/cn\";\nimport type { ThemeName } from \"@/theme/theme-context\";\n\nexport type CraftDrawerProps = {\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  tone?: ThemeName;\n  side?: \"right\" | \"left\";\n  title?: React.ReactNode;\n  children?: React.ReactNode;\n  trigger?: React.ReactNode;\n  footer?: React.ReactNode;\n  className?: string;\n};\n\nexport function CraftDrawer({\n  open,\n  defaultOpen = false,\n  onOpenChange,\n  tone,\n  side = \"left\",\n  title,\n  children,\n  trigger,\n  footer,\n  className,\n}: CraftDrawerProps) {\n  const [uncontrolledOpen, setUncontrolledOpen] = React.useState(defaultOpen);\n  const isControlled = typeof open === \"boolean\";\n  const isOpen = isControlled ? open : uncontrolledOpen;\n\n  const setOpen = React.useCallback(\n    (next: boolean) => {\n      if (!isControlled) setUncontrolledOpen(next);\n      onOpenChange?.(next);\n    },\n    [isControlled, onOpenChange]\n  );\n\n  React.useEffect(() => {\n    if (!isOpen) return;\n    const handleKey = (event: KeyboardEvent) => {\n      if (event.key === \"Escape\") setOpen(false);\n    };\n    document.addEventListener(\"keydown\", handleKey);\n    return () => document.removeEventListener(\"keydown\", handleKey);\n  }, [isOpen, setOpen]);\n\n  const content = isOpen ? (\n    <div className=\"fixed inset-0 z-50 overflow-hidden\">\n      <div\n        className=\"absolute inset-0 backdrop-blur-sm\"\n        onClick={() => setOpen(false)}\n      />\n      <div\n        className={cn(\n          \"absolute top-0 h-full w-full max-w-md border border-[rgb(var(--nc-border)/0.3)] bg-[rgb(var(--nc-surface)/0.12)] text-[rgb(var(--nc-fg))] shadow-[0_20px_60px_rgba(0,0,0,0.45)] backdrop-blur-2xl\",\n          side === \"right\" ? \"right-0\" : \"left-0\",\n          className\n        )}\n        data-nc-theme={tone}\n      >\n        <div className=\"flex items-center justify-between border-b border-[rgb(var(--nc-border)/0.3)] p-6\">\n          {title && <h3 className=\"text-xl font-semibold\">{title}</h3>}\n          <button\n            className=\"rounded-full border border-[rgb(var(--nc-border)/0.3)] bg-[rgb(var(--nc-surface)/0.12)] p-2 text-[rgb(var(--nc-fg-soft))] transition hover:text-[rgb(var(--nc-fg))]\"\n            onClick={() => setOpen(false)}\n            aria-label=\"Close\"\n          >\n            <svg viewBox=\"0 0 20 20\" className=\"h-4 w-4\" fill=\"currentColor\">\n              <path d=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\" />\n            </svg>\n          </button>\n        </div>\n        <div className=\"p-6 space-y-4 overflow-y-auto h-[calc(100%-5.5rem)]\">\n          {children}\n        </div>\n        {footer && <div className=\"border-t border-[rgb(var(--nc-border)/0.3)] p-6\">{footer}</div>}\n      </div>\n    </div>\n  ) : null;\n\n  return (\n    <>\n      {trigger && (\n        <span\n          onClick={() => setOpen(true)}\n          onKeyDown={(event) => {\n            if (event.key === \"Enter\" || event.key === \" \") setOpen(true);\n          }}\n          role=\"button\"\n          tabIndex={0}\n          className=\"inline-flex\"\n        >\n          {trigger}\n        </span>\n      )}\n      {typeof document !== \"undefined\" && content\n        ? createPortal(content, document.body)\n        : content}\n    </>\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAwDM;AAtDN,YAAuB;AACvB,uBAA6B;AAE7B,gBAAmB;AAgBZ,SAAS,YAAY;AAAA,EAC1B;AAAA,EACA,cAAc;AAAA,EACd;AAAA,EACA;AAAA,EACA,OAAO;AAAA,EACP;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAqB;AACnB,QAAM,CAAC,kBAAkB,mBAAmB,IAAI,MAAM,SAAS,WAAW;AAC1E,QAAM,eAAe,OAAO,SAAS;AACrC,QAAM,SAAS,eAAe,OAAO;AAErC,QAAM,UAAU,MAAM;AAAA,IACpB,CAAC,SAAkB;AACjB,UAAI,CAAC,aAAc,qBAAoB,IAAI;AAC3C,mDAAe;AAAA,IACjB;AAAA,IACA,CAAC,cAAc,YAAY;AAAA,EAC7B;AAEA,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,OAAQ;AACb,UAAM,YAAY,CAAC,UAAyB;AAC1C,UAAI,MAAM,QAAQ,SAAU,SAAQ,KAAK;AAAA,IAC3C;AACA,aAAS,iBAAiB,WAAW,SAAS;AAC9C,WAAO,MAAM,SAAS,oBAAoB,WAAW,SAAS;AAAA,EAChE,GAAG,CAAC,QAAQ,OAAO,CAAC;AAEpB,QAAM,UAAU,SACd,6CAAC,SAAI,WAAU,sCACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,QAAQ,KAAK;AAAA;AAAA,IAC9B;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACC,eAAW;AAAA,UACT;AAAA,UACA,SAAS,UAAU,YAAY;AAAA,UAC/B;AAAA,QACF;AAAA,QACA,iBAAe;AAAA,QAEf;AAAA,uDAAC,SAAI,WAAU,qFACZ;AAAA,qBAAS,4CAAC,QAAG,WAAU,yBAAyB,iBAAM;AAAA,YACvD;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,QAAQ,KAAK;AAAA,gBAC5B,cAAW;AAAA,gBAEX,sDAAC,SAAI,SAAQ,aAAY,WAAU,WAAU,MAAK,gBAChD,sDAAC,UAAK,GAAE,gLAA+K,GACzL;AAAA;AAAA,YACF;AAAA,aACF;AAAA,UACA,4CAAC,SAAI,WAAU,uDACZ,UACH;AAAA,UACC,UAAU,4CAAC,SAAI,WAAU,mDAAmD,kBAAO;AAAA;AAAA;AAAA,IACtF;AAAA,KACF,IACE;AAEJ,SACE,4EACG;AAAA,eACC;AAAA,MAAC;AAAA;AAAA,QACC,SAAS,MAAM,QAAQ,IAAI;AAAA,QAC3B,WAAW,CAAC,UAAU;AACpB,cAAI,MAAM,QAAQ,WAAW,MAAM,QAAQ,IAAK,SAAQ,IAAI;AAAA,QAC9D;AAAA,QACA,MAAK;AAAA,QACL,UAAU;AAAA,QACV,WAAU;AAAA,QAET;AAAA;AAAA,IACH;AAAA,IAED,OAAO,aAAa,eAAe,cAChC,+BAAa,SAAS,SAAS,IAAI,IACnC;AAAA,KACN;AAEJ;","names":[]}