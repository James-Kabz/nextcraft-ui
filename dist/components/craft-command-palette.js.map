{"version":3,"sources":["../../src/components/craft-command-palette.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nimport { cn } from \"@/utils/cn\";\nimport type { ThemeName } from \"@/theme/theme-context\";\nimport { CraftInput } from \"@/components/craft-input\";\nimport { CraftModal } from \"@/components/craft-modal\";\n\nexport type CraftCommandItem = {\n  id: string;\n  label: string;\n  description?: string;\n  keywords?: string[];\n  icon?: React.ReactNode;\n  onSelect?: () => void;\n  disabled?: boolean;\n};\n\nexport type CraftCommandPaletteProps = {\n  items: CraftCommandItem[];\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  trigger?: React.ReactNode;\n  title?: React.ReactNode;\n  placeholder?: string;\n  emptyText?: React.ReactNode;\n  tone?: ThemeName;\n  className?: string;\n};\n\nexport function CraftCommandPalette({\n  items,\n  open,\n  defaultOpen = false,\n  onOpenChange,\n  trigger,\n  title = \"Command Palette\",\n  placeholder = \"Search commands...\",\n  emptyText = \"No results found.\",\n  tone,\n  className,\n}: CraftCommandPaletteProps) {\n  const [uncontrolledOpen, setUncontrolledOpen] = React.useState(defaultOpen);\n  const isControlled = typeof open === \"boolean\";\n  const isOpen = isControlled ? open : uncontrolledOpen;\n  const [query, setQuery] = React.useState(\"\");\n\n  const setOpen = React.useCallback(\n    (next: boolean) => {\n      if (!isControlled) setUncontrolledOpen(next);\n      onOpenChange?.(next);\n    },\n    [isControlled, onOpenChange]\n  );\n\n  const filtered = React.useMemo(() => {\n    const q = query.trim().toLowerCase();\n    if (!q) return items;\n    return items.filter((item) => {\n      const haystack = [\n        item.label,\n        item.description ?? \"\",\n        ...(item.keywords ?? []),\n      ]\n        .join(\" \")\n        .toLowerCase();\n      return haystack.includes(q);\n    });\n  }, [items, query]);\n\n  React.useEffect(() => {\n    if (!isOpen) setQuery(\"\");\n  }, [isOpen]);\n\n  return (\n    <CraftModal\n      open={isOpen}\n      onOpenChange={setOpen}\n      trigger={trigger}\n      title={title}\n      tone={tone}\n      className={cn(\"max-w-xl\", className)}\n    >\n      <div className=\"space-y-4\">\n        <CraftInput\n          type=\"search\"\n          placeholder={placeholder}\n          value={query}\n          onChange={(event) => setQuery(event.target.value)}\n        />\n        <div className=\"space-y-2\">\n          {filtered.length === 0 && (\n            <div className=\"rounded-2xl border border-[rgb(var(--nc-border)/0.35)] bg-[rgb(var(--nc-surface)/0.12)] p-4 text-sm text-[rgb(var(--nc-fg-muted))]\">\n              {emptyText}\n            </div>\n          )}\n          {filtered.map((item) => (\n            <button\n              key={item.id}\n              type=\"button\"\n              disabled={item.disabled}\n              onClick={() => {\n                if (item.disabled) return;\n                item.onSelect?.();\n                setOpen(false);\n              }}\n              className={cn(\n                \"flex w-full items-start gap-3 rounded-2xl border border-[rgb(var(--nc-border)/0.35)] bg-[rgb(var(--nc-surface)/0.08)] px-4 py-3 text-left transition\",\n                item.disabled\n                  ? \"cursor-not-allowed opacity-60\"\n                  : \"hover:bg-[rgb(var(--nc-surface)/0.16)]\"\n              )}\n            >\n              {item.icon && <span className=\"mt-1\">{item.icon}</span>}\n              <span>\n                <span className=\"block text-sm font-semibold\">{item.label}</span>\n                {item.description && (\n                  <span className=\"block text-xs text-[rgb(var(--nc-fg-muted))]\">\n                    {item.description}\n                  </span>\n                )}\n              </span>\n            </button>\n          ))}\n        </div>\n      </div>\n    </CraftModal>\n  );\n}\n"],"mappings":";AAsFQ,cA8BM,YA9BN;AApFR,YAAY,WAAW;AAEvB,SAAS,UAAU;AAEnB,SAAS,kBAAkB;AAC3B,SAAS,kBAAkB;AAyBpB,SAAS,oBAAoB;AAAA,EAClC;AAAA,EACA;AAAA,EACA,cAAc;AAAA,EACd;AAAA,EACA;AAAA,EACA,QAAQ;AAAA,EACR,cAAc;AAAA,EACd,YAAY;AAAA,EACZ;AAAA,EACA;AACF,GAA6B;AAC3B,QAAM,CAAC,kBAAkB,mBAAmB,IAAI,MAAM,SAAS,WAAW;AAC1E,QAAM,eAAe,OAAO,SAAS;AACrC,QAAM,SAAS,eAAe,OAAO;AACrC,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,EAAE;AAE3C,QAAM,UAAU,MAAM;AAAA,IACpB,CAAC,SAAkB;AACjB,UAAI,CAAC,aAAc,qBAAoB,IAAI;AAC3C,mDAAe;AAAA,IACjB;AAAA,IACA,CAAC,cAAc,YAAY;AAAA,EAC7B;AAEA,QAAM,WAAW,MAAM,QAAQ,MAAM;AACnC,UAAM,IAAI,MAAM,KAAK,EAAE,YAAY;AACnC,QAAI,CAAC,EAAG,QAAO;AACf,WAAO,MAAM,OAAO,CAAC,SAAS;AA5DlC;AA6DM,YAAM,WAAW;AAAA,QACf,KAAK;AAAA,SACL,UAAK,gBAAL,YAAoB;AAAA,QACpB,IAAI,UAAK,aAAL,YAAiB,CAAC;AAAA,MACxB,EACG,KAAK,GAAG,EACR,YAAY;AACf,aAAO,SAAS,SAAS,CAAC;AAAA,IAC5B,CAAC;AAAA,EACH,GAAG,CAAC,OAAO,KAAK,CAAC;AAEjB,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,OAAQ,UAAS,EAAE;AAAA,EAC1B,GAAG,CAAC,MAAM,CAAC;AAEX,SACE;AAAA,IAAC;AAAA;AAAA,MACC,MAAM;AAAA,MACN,cAAc;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,MACA,WAAW,GAAG,YAAY,SAAS;AAAA,MAEnC,+BAAC,SAAI,WAAU,aACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL;AAAA,YACA,OAAO;AAAA,YACP,UAAU,CAAC,UAAU,SAAS,MAAM,OAAO,KAAK;AAAA;AAAA,QAClD;AAAA,QACA,qBAAC,SAAI,WAAU,aACZ;AAAA,mBAAS,WAAW,KACnB,oBAAC,SAAI,WAAU,sIACZ,qBACH;AAAA,UAED,SAAS,IAAI,CAAC,SACb;AAAA,YAAC;AAAA;AAAA,cAEC,MAAK;AAAA,cACL,UAAU,KAAK;AAAA,cACf,SAAS,MAAM;AAvG7B;AAwGgB,oBAAI,KAAK,SAAU;AACnB,2BAAK,aAAL;AACA,wBAAQ,KAAK;AAAA,cACf;AAAA,cACA,WAAW;AAAA,gBACT;AAAA,gBACA,KAAK,WACD,kCACA;AAAA,cACN;AAAA,cAEC;AAAA,qBAAK,QAAQ,oBAAC,UAAK,WAAU,QAAQ,eAAK,MAAK;AAAA,gBAChD,qBAAC,UACC;AAAA,sCAAC,UAAK,WAAU,+BAA+B,eAAK,OAAM;AAAA,kBACzD,KAAK,eACJ,oBAAC,UAAK,WAAU,gDACb,eAAK,aACR;AAAA,mBAEJ;AAAA;AAAA;AAAA,YAvBK,KAAK;AAAA,UAwBZ,CACD;AAAA,WACH;AAAA,SACF;AAAA;AAAA,EACF;AAEJ;","names":[]}