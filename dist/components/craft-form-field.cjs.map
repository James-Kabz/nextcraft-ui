{"version":3,"sources":["../../src/components/craft-form-field.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport {\n  Controller,\n  type FieldValues,\n  type Path,\n  type RegisterOptions,\n  useFormContext,\n} from \"react-hook-form\";\n\nimport { cn } from \"@/utils/cn\";\nimport type { ThemeName } from \"@/theme/theme-context\";\nimport { CraftInput } from \"@/components/craft-input\";\nimport { CraftTextarea } from \"@/components/craft-textarea\";\nimport { CraftSelect } from \"@/components/craft-select\";\nimport { CraftCheckbox } from \"@/components/craft-checkbox\";\nimport { CraftSwitch } from \"@/components/craft-switch\";\nimport { CraftDatePicker } from \"@/components/craft-date-picker\";\nimport { CraftNumberInput } from \"@/components/craft-number-input\";\nimport { CraftCurrencyInput } from \"@/components/craft-currency-input\";\n\nexport type CraftFormFieldOption = {\n  label: React.ReactNode;\n  value: string;\n  disabled?: boolean;\n};\n\nexport type CraftFormFieldType =\n  | \"text\"\n  | \"number\"\n  | \"password\"\n  | \"textarea\"\n  | \"select\"\n  | \"checkbox\"\n  | \"slider\"\n  | \"date\"\n  | \"color\"\n  | \"email\"\n  | \"tel\"\n  | \"url\"\n  | \"time\"\n  | \"datetime-local\"\n  | \"month\"\n  | \"week\"\n  | \"file\"\n  | \"multifile\"\n  | \"radio\"\n  | \"switch\"\n  | \"range\"\n  | \"search\"\n  | \"hidden\"\n  | \"multiselect\"\n  | \"currency\";\n\nexport type CraftFormFieldProps<TValues extends FieldValues = FieldValues> = {\n  name: Path<TValues>;\n  label?: React.ReactNode;\n  description?: React.ReactNode;\n  type?: CraftFormFieldType;\n  options?: CraftFormFieldOption[];\n  placeholder?: string;\n  tone?: ThemeName;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  descriptionClassName?: string;\n  rules?: RegisterOptions<TValues>;\n  disabled?: boolean;\n  fieldProps?: Record<string, unknown>;\n};\n\nfunction getFieldError(errors: unknown, name: string) {\n  if (!errors || typeof errors !== \"object\") return undefined;\n  const segments = name.split(\".\");\n  let current: unknown = errors;\n  for (const segment of segments) {\n    if (!current || typeof current !== \"object\") return undefined;\n    current = (current as Record<string, unknown>)[segment];\n  }\n  return current;\n}\n\nconst baseInputClass =\n  \"w-full rounded-2xl border-2 bg-[rgb(var(--nc-surface)/0.08)] text-[rgb(var(--nc-fg))] backdrop-blur-xl shadow-[inset_0_2px_8px_rgba(0,0,0,0.3)] focus:outline-none focus:ring-4 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed border-[rgb(var(--nc-border)/0.35)] focus:border-[rgb(var(--nc-accent-1)/0.8)] focus:ring-[rgb(var(--nc-accent-1)/0.3)] px-5 py-3 text-base placeholder:text-[rgb(var(--nc-fg-soft))]\";\n\nexport function CraftFormField<TValues extends FieldValues = FieldValues>({\n  name,\n  label,\n  description,\n  type = \"text\",\n  options = [],\n  placeholder,\n  tone,\n  className,\n  inputClassName,\n  labelClassName,\n  descriptionClassName,\n  rules,\n  disabled,\n  fieldProps,\n}: CraftFormFieldProps<TValues>) {\n  const { register, control, formState } = useFormContext<TValues>();\n  const error = getFieldError(formState.errors, name);\n  const errorMessage =\n    typeof (error as { message?: unknown })?.message === \"string\"\n      ? (error as { message: string }).message\n      : undefined;\n\n  if (type === \"hidden\") {\n    return <input type=\"hidden\" {...register(name, rules)} />;\n  }\n\n  const labelNode = label ? (\n    <label\n      htmlFor={name}\n      className={cn(\n        \"text-sm font-semibold text-[rgb(var(--nc-fg))]\",\n        labelClassName\n      )}\n    >\n      {label}\n    </label>\n  ) : null;\n\n  const descriptionNode = description ? (\n    <p\n      className={cn(\n        \"text-xs text-[rgb(var(--nc-fg-muted))]\",\n        descriptionClassName\n      )}\n    >\n      {description}\n    </p>\n  ) : null;\n\n  const errorNode = errorMessage ? (\n    <p className=\"text-xs text-[rgb(var(--nc-accent-3))]\">{errorMessage}</p>\n  ) : null;\n\n  const renderInput = () => {\n    if (type === \"textarea\") {\n      return (\n        <CraftTextarea\n          id={name}\n          placeholder={placeholder}\n          tone={tone}\n          className={inputClassName}\n          disabled={disabled}\n          {...(fieldProps as Record<string, unknown>)}\n          {...register(name, rules)}\n        />\n      );\n    }\n\n    if (type === \"select\" || type === \"multiselect\") {\n      return (\n        <CraftSelect\n          id={name}\n          tone={tone}\n          className={inputClassName}\n          multiple={type === \"multiselect\"}\n          disabled={disabled}\n          {...(fieldProps as Record<string, unknown>)}\n          {...register(name, rules)}\n        >\n          {placeholder && (\n            <option value=\"\" disabled>\n              {placeholder}\n            </option>\n          )}\n          {options.map((option) => (\n            <option\n              key={option.value}\n              value={option.value}\n              disabled={option.disabled}\n            >\n              {option.label}\n            </option>\n          ))}\n        </CraftSelect>\n      );\n    }\n\n    if (type === \"checkbox\") {\n      return (\n        <CraftCheckbox\n          tone={tone}\n          label={label}\n          description={description}\n          disabled={disabled}\n          {...(fieldProps as Record<string, unknown>)}\n          {...register(name, rules)}\n        />\n      );\n    }\n\n    if (type === \"switch\") {\n      return (\n        <CraftSwitch\n          tone={tone}\n          label={label}\n          disabled={disabled}\n          {...(fieldProps as Record<string, unknown>)}\n          {...register(name, rules)}\n        />\n      );\n    }\n\n    if (type === \"date\") {\n      return (\n        <Controller\n          control={control}\n          name={name}\n          rules={rules}\n          render={({ field }) => (\n            <CraftDatePicker\n              value={field.value ?? \"\"}\n              onChange={field.onChange}\n              tone={tone}\n              placeholder={placeholder}\n              {...(fieldProps as Record<string, unknown>)}\n            />\n          )}\n        />\n      );\n    }\n\n    if (type === \"number\") {\n      return (\n        <CraftNumberInput\n          id={name}\n          tone={tone}\n          placeholder={placeholder}\n          className={inputClassName}\n          disabled={disabled}\n          {...(fieldProps as Record<string, unknown>)}\n          {...register(name, rules)}\n        />\n      );\n    }\n\n    if (type === \"currency\") {\n      return (\n        <CraftCurrencyInput\n          id={name}\n          tone={tone}\n          placeholder={placeholder}\n          className={inputClassName}\n          disabled={disabled}\n          {...(fieldProps as Record<string, unknown>)}\n          {...register(name, rules)}\n        />\n      );\n    }\n\n    if (type === \"radio\") {\n      return (\n        <div className=\"grid gap-3\">\n          {options.map((option) => (\n            <label\n              key={option.value}\n              className={cn(\n                \"flex items-center gap-3 rounded-2xl border border-[rgb(var(--nc-border)/0.35)] bg-[rgb(var(--nc-surface)/0.08)] px-4 py-3 text-sm text-[rgb(var(--nc-fg))]\",\n                \"transition-all duration-200\",\n                \"focus-within:ring-2 focus-within:ring-[rgb(var(--nc-accent-1)/0.5)]\",\n                option.disabled ? \"opacity-60\" : \"cursor-pointer\"\n              )}\n              data-nc-theme={tone}\n            >\n              <input\n                type=\"radio\"\n                value={option.value}\n                disabled={option.disabled || disabled}\n                className=\"h-4 w-4 accent-[rgb(var(--nc-accent-1))]\"\n                {...(fieldProps as Record<string, unknown>)}\n                {...register(name, rules)}\n              />\n              <span>{option.label}</span>\n            </label>\n          ))}\n        </div>\n      );\n    }\n\n    if (type === \"range\" || type === \"slider\") {\n      return (\n        <input\n          id={name}\n          type=\"range\"\n          className={cn(\n            \"w-full accent-[rgb(var(--nc-accent-1))]\",\n            inputClassName\n          )}\n          disabled={disabled}\n          {...(fieldProps as Record<string, unknown>)}\n          {...register(name, rules)}\n        />\n      );\n    }\n\n    if (type === \"file\" || type === \"multifile\") {\n      return (\n        <input\n          id={name}\n          type=\"file\"\n          multiple={type === \"multifile\"}\n          className={cn(\n            baseInputClass,\n            \"file:mr-4 file:rounded-xl file:border-0 file:bg-[rgb(var(--nc-surface)/0.35)] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-[rgb(var(--nc-fg))]\",\n            inputClassName\n          )}\n          disabled={disabled}\n          {...(fieldProps as Record<string, unknown>)}\n          {...register(name, rules)}\n        />\n      );\n    }\n\n    const inputType =\n      type === \"search\" ||\n      type === \"password\" ||\n      type === \"email\" ||\n      type === \"tel\" ||\n      type === \"url\" ||\n      type === \"time\" ||\n      type === \"datetime-local\" ||\n      type === \"month\" ||\n      type === \"week\" ||\n      type === \"color\"\n        ? type\n        : \"text\";\n\n    return (\n      <CraftInput\n        id={name}\n        type={inputType}\n        placeholder={placeholder}\n        tone={tone}\n        className={inputClassName}\n        disabled={disabled}\n        {...(fieldProps as Record<string, unknown>)}\n        {...register(name, rules)}\n      />\n    );\n  };\n\n  const showLabel = type !== \"checkbox\" && type !== \"switch\";\n  const showDescriptionAbove = type !== \"checkbox\" && type !== \"switch\";\n  const showDescriptionBelow = type === \"switch\";\n\n  return (\n    <div className={cn(\"space-y-2\", className)} data-nc-theme={tone}>\n      {showLabel ? labelNode : null}\n      {showDescriptionAbove ? descriptionNode : null}\n      {renderInput()}\n      {showDescriptionBelow ? descriptionNode : null}\n      {errorNode}\n    </div>\n  );\n}\n"],"mappings":"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","names":[]}