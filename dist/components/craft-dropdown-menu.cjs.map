{"version":3,"sources":["../../src/components/craft-dropdown-menu.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nimport { cn } from \"@/utils/cn\";\nimport type { ThemeName } from \"@/theme/theme-context\";\nimport { CraftPopover } from \"@/components/craft-popover\";\n\nexport type CraftDropdownItem = {\n  id?: string;\n  label: React.ReactNode;\n  description?: React.ReactNode;\n  icon?: React.ReactNode;\n  href?: string;\n  onSelect?: () => void;\n  disabled?: boolean;\n};\n\nexport type CraftDropdownMenuProps = {\n  trigger: React.ReactNode;\n  items?: CraftDropdownItem[];\n  content?: React.ReactNode;\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  align?: \"start\" | \"center\" | \"end\";\n  tone?: ThemeName;\n  className?: string;\n  menuClassName?: string;\n};\n\nexport function CraftDropdownMenu({\n  trigger,\n  items = [],\n  content,\n  open,\n  defaultOpen = false,\n  onOpenChange,\n  align = \"end\",\n  tone,\n  className,\n  menuClassName,\n}: CraftDropdownMenuProps) {\n  const [uncontrolledOpen, setUncontrolledOpen] = React.useState(defaultOpen);\n  const isControlled = typeof open === \"boolean\";\n  const isOpen = isControlled ? open : uncontrolledOpen;\n\n  const setOpen = React.useCallback(\n    (next: boolean) => {\n      if (!isControlled) setUncontrolledOpen(next);\n      onOpenChange?.(next);\n    },\n    [isControlled, onOpenChange]\n  );\n\n  const menuContent =\n    content ??\n    (items.length ? (\n      <div className={cn(\"space-y-1\", menuClassName)} role=\"menu\">\n        {items.map((item, index) => {\n          const key = item.id ?? `${index}-${String(item.label)}`;\n          const itemClasses = cn(\n            \"flex w-full items-start gap-3 rounded-xl px-3 py-2 text-left text-sm transition\",\n            item.disabled\n              ? \"cursor-not-allowed text-[rgb(var(--nc-fg-soft))] opacity-60\"\n              : \"text-[rgb(var(--nc-fg))] hover:bg-[rgb(var(--nc-surface)/0.12)]\"\n          );\n          const contentNode = (\n            <>\n              {item.icon && <span className=\"mt-0.5\">{item.icon}</span>}\n              <span className=\"flex-1\">\n                <span className=\"block font-medium\">{item.label}</span>\n                {item.description && (\n                  <span className=\"block text-xs text-[rgb(var(--nc-fg-muted))]\">\n                    {item.description}\n                  </span>\n                )}\n              </span>\n            </>\n          );\n\n          if (item.href) {\n            return (\n              <a\n                key={key}\n                href={item.href}\n                className={itemClasses}\n                role=\"menuitem\"\n                onClick={() => {\n                  if (item.disabled) return;\n                  item.onSelect?.();\n                  setOpen(false);\n                }}\n              >\n                {contentNode}\n              </a>\n            );\n          }\n\n          return (\n            <button\n              key={key}\n              type=\"button\"\n              className={itemClasses}\n              role=\"menuitem\"\n              onClick={() => {\n                if (item.disabled) return;\n                item.onSelect?.();\n                setOpen(false);\n              }}\n            >\n              {contentNode}\n            </button>\n          );\n        })}\n      </div>\n    ) : null);\n\n  return (\n    <CraftPopover\n      trigger={trigger}\n      content={menuContent}\n      open={isOpen}\n      onOpenChange={setOpen}\n      align={align}\n      tone={tone}\n      className={className}\n    />\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAoEY;AAlEZ,YAAuB;AAEvB,gBAAmB;AAEnB,2BAA6B;AAyBtB,SAAS,kBAAkB;AAAA,EAChC;AAAA,EACA,QAAQ,CAAC;AAAA,EACT;AAAA,EACA;AAAA,EACA,cAAc;AAAA,EACd;AAAA,EACA,QAAQ;AAAA,EACR;AAAA,EACA;AAAA,EACA;AACF,GAA2B;AACzB,QAAM,CAAC,kBAAkB,mBAAmB,IAAI,MAAM,SAAS,WAAW;AAC1E,QAAM,eAAe,OAAO,SAAS;AACrC,QAAM,SAAS,eAAe,OAAO;AAErC,QAAM,UAAU,MAAM;AAAA,IACpB,CAAC,SAAkB;AACjB,UAAI,CAAC,aAAc,qBAAoB,IAAI;AAC3C,mDAAe;AAAA,IACjB;AAAA,IACA,CAAC,cAAc,YAAY;AAAA,EAC7B;AAEA,QAAM,cACJ,4BACC,MAAM,SACL,4CAAC,SAAI,eAAW,cAAG,aAAa,aAAa,GAAG,MAAK,QAClD,gBAAM,IAAI,CAAC,MAAM,UAAU;AA3DpC;AA4DU,UAAM,OAAM,UAAK,OAAL,YAAW,GAAG,KAAK,IAAI,OAAO,KAAK,KAAK,CAAC;AACrD,UAAM,kBAAc;AAAA,MAClB;AAAA,MACA,KAAK,WACD,gEACA;AAAA,IACN;AACA,UAAM,cACJ,4EACG;AAAA,WAAK,QAAQ,4CAAC,UAAK,WAAU,UAAU,eAAK,MAAK;AAAA,MAClD,6CAAC,UAAK,WAAU,UACd;AAAA,oDAAC,UAAK,WAAU,qBAAqB,eAAK,OAAM;AAAA,QAC/C,KAAK,eACJ,4CAAC,UAAK,WAAU,gDACb,eAAK,aACR;AAAA,SAEJ;AAAA,OACF;AAGF,QAAI,KAAK,MAAM;AACb,aACE;AAAA,QAAC;AAAA;AAAA,UAEC,MAAM,KAAK;AAAA,UACX,WAAW;AAAA,UACX,MAAK;AAAA,UACL,SAAS,MAAM;AAxF/B,gBAAAA;AAyFkB,gBAAI,KAAK,SAAU;AACnB,aAAAA,MAAA,KAAK,aAAL,gBAAAA,IAAA;AACA,oBAAQ,KAAK;AAAA,UACf;AAAA,UAEC;AAAA;AAAA,QAVI;AAAA,MAWP;AAAA,IAEJ;AAEA,WACE;AAAA,MAAC;AAAA;AAAA,QAEC,MAAK;AAAA,QACL,WAAW;AAAA,QACX,MAAK;AAAA,QACL,SAAS,MAAM;AAzG7B,cAAAA;AA0GgB,cAAI,KAAK,SAAU;AACnB,WAAAA,MAAA,KAAK,aAAL,gBAAAA,IAAA;AACA,kBAAQ,KAAK;AAAA,QACf;AAAA,QAEC;AAAA;AAAA,MAVI;AAAA,IAWP;AAAA,EAEJ,CAAC,GACH,IACE;AAEN,SACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA,SAAS;AAAA,MACT,MAAM;AAAA,MACN,cAAc;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA;AAAA,EACF;AAEJ;","names":["_a"]}