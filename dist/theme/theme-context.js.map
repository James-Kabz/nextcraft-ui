{"version":3,"sources":["../../src/theme/theme-context.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nexport type ThemeName = \"aurora\" | \"ember\" | \"ocean\" | \"midnight\" | \"cosmic\";\nexport type ThemeMode = \"light\" | \"dark\" | \"system\";\n\nexport const THEME_NAMES: ThemeName[] = [\n  \"aurora\",\n  \"ember\",\n  \"ocean\",\n  \"midnight\",\n  \"cosmic\",\n];\n\ntype ThemeContextValue = {\n  theme: ThemeName;\n  mode: ThemeMode;\n  setTheme: (theme: ThemeName) => void;\n  setMode: (mode: ThemeMode) => void;\n};\n\nconst ThemeContext = React.createContext<ThemeContextValue | null>(null);\n\ntype ThemeProviderProps = {\n  children: React.ReactNode;\n  defaultTheme?: ThemeName;\n  defaultMode?: ThemeMode;\n  storageKeyTheme?: string;\n  storageKeyMode?: string;\n};\n\nconst DEFAULT_THEME_KEY = \"nextcraft-theme\";\nconst DEFAULT_MODE_KEY = \"nextcraft-mode\";\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"ocean\",\n  defaultMode = \"system\",\n  storageKeyTheme = DEFAULT_THEME_KEY,\n  storageKeyMode = DEFAULT_MODE_KEY,\n}: ThemeProviderProps) {\n  const [theme, setTheme] = React.useState<ThemeName>(defaultTheme);\n  const [mode, setMode] = React.useState<ThemeMode>(defaultMode);\n\n  React.useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    try {\n      const storedTheme = window.localStorage.getItem(storageKeyTheme) as ThemeName | null;\n      const storedMode = window.localStorage.getItem(storageKeyMode) as ThemeMode | null;\n      if (storedTheme) setTheme(storedTheme);\n      if (storedMode) setMode(storedMode);\n    } catch {\n      // Ignore storage errors.\n    }\n  }, [storageKeyTheme, storageKeyMode]);\n\n  React.useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    try {\n      window.localStorage.setItem(storageKeyTheme, theme);\n      window.localStorage.setItem(storageKeyMode, mode);\n    } catch {\n      // Ignore storage errors.\n    }\n  }, [theme, mode, storageKeyTheme, storageKeyMode]);\n\n  React.useEffect(() => {\n    if (typeof document === \"undefined\") return;\n    const root = document.documentElement;\n    root.dataset.ncTheme = theme;\n\n    if (mode !== \"system\") {\n      root.dataset.ncMode = mode;\n      return;\n    }\n\n    const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    const applySystem = () => {\n      root.dataset.ncMode = mediaQuery.matches ? \"dark\" : \"light\";\n    };\n\n    applySystem();\n\n    if (typeof mediaQuery.addEventListener === \"function\") {\n      mediaQuery.addEventListener(\"change\", applySystem);\n      return () => mediaQuery.removeEventListener(\"change\", applySystem);\n    }\n\n    mediaQuery.addListener(applySystem);\n    return () => mediaQuery.removeListener(applySystem);\n  }, [theme, mode]);\n\n  const value = React.useMemo(\n    () => ({ theme, mode, setTheme, setMode }),\n    [theme, mode]\n  );\n\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\n}\n\nexport function useTheme() {\n  const context = React.useContext(ThemeContext);\n  if (!context) {\n    throw new Error(\"useTheme must be used within ThemeProvider\");\n  }\n  return context;\n}\n"],"mappings":";AAkGS;AAhGT,YAAY,WAAW;AAKhB,MAAM,cAA2B;AAAA,EACtC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AASA,MAAM,eAAe,MAAM,cAAwC,IAAI;AAUvE,MAAM,oBAAoB;AAC1B,MAAM,mBAAmB;AAElB,SAAS,cAAc;AAAA,EAC5B;AAAA,EACA,eAAe;AAAA,EACf,cAAc;AAAA,EACd,kBAAkB;AAAA,EAClB,iBAAiB;AACnB,GAAuB;AACrB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAoB,YAAY;AAChE,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAoB,WAAW;AAE7D,QAAM,UAAU,MAAM;AACpB,QAAI,OAAO,WAAW,YAAa;AACnC,QAAI;AACF,YAAM,cAAc,OAAO,aAAa,QAAQ,eAAe;AAC/D,YAAM,aAAa,OAAO,aAAa,QAAQ,cAAc;AAC7D,UAAI,YAAa,UAAS,WAAW;AACrC,UAAI,WAAY,SAAQ,UAAU;AAAA,IACpC,QAAQ;AAAA,IAER;AAAA,EACF,GAAG,CAAC,iBAAiB,cAAc,CAAC;AAEpC,QAAM,UAAU,MAAM;AACpB,QAAI,OAAO,WAAW,YAAa;AACnC,QAAI;AACF,aAAO,aAAa,QAAQ,iBAAiB,KAAK;AAClD,aAAO,aAAa,QAAQ,gBAAgB,IAAI;AAAA,IAClD,QAAQ;AAAA,IAER;AAAA,EACF,GAAG,CAAC,OAAO,MAAM,iBAAiB,cAAc,CAAC;AAEjD,QAAM,UAAU,MAAM;AACpB,QAAI,OAAO,aAAa,YAAa;AACrC,UAAM,OAAO,SAAS;AACtB,SAAK,QAAQ,UAAU;AAEvB,QAAI,SAAS,UAAU;AACrB,WAAK,QAAQ,SAAS;AACtB;AAAA,IACF;AAEA,UAAM,aAAa,OAAO,WAAW,8BAA8B;AACnE,UAAM,cAAc,MAAM;AACxB,WAAK,QAAQ,SAAS,WAAW,UAAU,SAAS;AAAA,IACtD;AAEA,gBAAY;AAEZ,QAAI,OAAO,WAAW,qBAAqB,YAAY;AACrD,iBAAW,iBAAiB,UAAU,WAAW;AACjD,aAAO,MAAM,WAAW,oBAAoB,UAAU,WAAW;AAAA,IACnE;AAEA,eAAW,YAAY,WAAW;AAClC,WAAO,MAAM,WAAW,eAAe,WAAW;AAAA,EACpD,GAAG,CAAC,OAAO,IAAI,CAAC;AAEhB,QAAM,QAAQ,MAAM;AAAA,IAClB,OAAO,EAAE,OAAO,MAAM,UAAU,QAAQ;AAAA,IACxC,CAAC,OAAO,IAAI;AAAA,EACd;AAEA,SAAO,oBAAC,aAAa,UAAb,EAAsB,OAAe,UAAS;AACxD;AAEO,SAAS,WAAW;AACzB,QAAM,UAAU,MAAM,WAAW,YAAY;AAC7C,MAAI,CAAC,SAAS;AACZ,UAAM,IAAI,MAAM,4CAA4C;AAAA,EAC9D;AACA,SAAO;AACT;","names":[]}